{% load static %}
<!doctype html>
<html lang="es" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Sistema Audiología{% endblock %}</title>

  <!-- Bootstrap / Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- Fuente moderna -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Paleta “salud” */
      --brand-50:#f0f7ff;
      --brand-100:#e1f2ff;
      --brand-200:#cde8ff;
      --brand-300:#9fd4ff;
      --brand-400:#67b7ff;
      --brand-500:#2f95ff;  /* principal */
      --brand-600:#1f78e0;
      --brand-700:#175fb3;
      --brand-800:#114a8a;
      --brand-900:#0d3b6d;

      --teal-500:#14b8a6;
      --ok:#16a34a;
      --warn:#f59e0b;
      --danger:#ef4444;

      --surface:#f7f9fc;    /* fondo app */
      --muted:#6b7280;      /* textos secundarios */
      --radius:14px;
    }

    html,body{ height:100%; }
    body{
      font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background:
        radial-gradient(1200px 700px at 10% -10%, rgba(47,149,255,.12), transparent 60%),
        radial-gradient(900px 600px at 110% 0%, rgba(20,184,166,.10), transparent 60%),
        var(--surface);
    }

    /* Navbar elegante */
    .app-navbar{
      backdrop-filter: saturate(160%) blur(6px);
      background: rgba(255,255,255,.85) !important;
      border-bottom: 1px solid rgba(15, 23, 42, .06);
      box-shadow: 0 4px 24px rgba(2, 6, 23, .06);
    }
    .navbar-brand{
      font-weight: 800; letter-spacing:.2px;
      display:flex; align-items:center; gap:.625rem;
    }
    .brand-badge{
      display:inline-grid; place-items:center;
      width:34px; height:34px; border-radius:10px;
      background: linear-gradient(135deg, var(--brand-500), var(--teal-500));
      color:white; box-shadow: 0 6px 18px rgba(47,149,255,.35);
    }
    .nav-link{ font-weight:500; }
    .nav-link.active, .nav-link:hover{ color: var(--brand-700) !important; }

    /* Botones de marca (sin romper btn-primary existente) */
    .btn-brand{
      --bs-btn-bg: var(--brand-600);
      --bs-btn-border-color: var(--brand-600);
      --bs-btn-hover-bg: var(--brand-700);
      --bs-btn-hover-border-color: var(--brand-700);
      --bs-btn-active-bg: var(--brand-800);
      --bs-btn-active-border-color: var(--brand-800);
      --bs-btn-color: #fff;
      --bs-btn-hover-color:#fff;
    }
    .btn-outline-brand{
      --bs-btn-color: var(--brand-700);
      --bs-btn-border-color: var(--brand-300);
      --bs-btn-hover-bg: var(--brand-50);
      --bs-btn-hover-border-color: var(--brand-500);
      --bs-btn-active-bg: var(--brand-100);
      --bs-btn-active-border-color: var(--brand-600);
    }

    /* Tarjetas */
    .card{
      border: 1px solid rgba(15, 23, 42, .06);
      border-radius: var(--radius);
      box-shadow: 0 10px 22px rgba(2,6,23,.04);
    }
    .card-header{
      border-bottom: 1px solid rgba(15, 23, 42, .06);
      background: linear-gradient(180deg, #fff, rgba(255,255,255,.92));
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
    }

    /* Títulos sección */
    .section-title{
      font-weight: 700;
      letter-spacing:.2px;
    }
    .section-sub{
      color: var(--muted);
      font-size:.925rem;
    }

    /* Tablas */
    .table thead th{
      white-space: nowrap;
      font-weight:600;
      color:#0f172a;
      background: linear-gradient(180deg, #fff, #f8fafc);
      border-bottom:1px solid rgba(15, 23, 42, .06) !important;
    }
    .table tbody tr:hover{
      background: rgba(47,149,255,.06);
    }
    .table > :not(caption) > * > *{
      box-shadow: inset 0 -1px 0 rgba(15, 23, 42, .05);
    }

    /* Chips / ayudantes */
    .pill{
      display:inline-flex; align-items:center; gap:.5rem;
      font-weight:600; font-size:.825rem;
      padding:.375rem .625rem; border-radius:999px;
      background: var(--brand-50); color: var(--brand-800);
      border:1px solid var(--brand-200);
    }

    /* Alerts más sutiles */
    .alert{ border-radius: 12px; }

    /* Contenedor general */
    main.container-xxl{ padding-top: 1.2rem; padding-bottom: 2rem; }
  </style>

  {% block extra_head %}{% endblock %}
</head>
<body>

<nav class="navbar navbar-expand-lg app-navbar sticky-top">
  <div class="container-xxl">
    <a class="navbar-brand" href="{% url 'home' %}">
      <span class="brand-badge"><i class="bi bi-ear"></i></span>
      Audiología
    </a>

    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="mainNav" class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'patient_list' %}active{% endif %}" href="{% url 'patient_list' %}"><i class="bi bi-people me-1"></i> Pacientes</a></li>
      </ul>

      <div class="d-flex align-items-center gap-3">
        <span class="text-secondary small d-none d-md-inline">Hola, <strong>{{ request.user.username }}</strong></span>
        <a class="btn btn-outline-brand btn-sm" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right me-1"></i> Salir</a>
      </div>
    </div>
  </div>
</nav>

<main class="container-xxl">
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  {% endfor %}

  {% block content %}{% endblock %}
</main>

<footer class="border-top py-3 mt-auto">
  <div class="container-xxl small text-muted d-flex justify-content-between">
    <span>Sistema de Agendamiento de Pacientes — Audiología</span>
    <span><i class="bi bi-shield-check me-1"></i> Datos protegidos</span>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
