{% extends "core/base.html" %}
{% block title %}Nueva Anamnesis — {{ patient.last_name }}{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-lg-10">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Anamnesis — {{ patient.last_name }}, {{ patient.first_name }}</h5>

        <form method="post" class="row g-3">
          {% csrf_token %}

          <div class="col-sm-4">
            <label class="form-label" for="{{ form.date.id_for_label }}">Fecha</label>
            {{ form.date }}
          </div>

          <div class="col-12">
            <label class="form-label" for="{{ form.main_complaint.id_for_label }}">Motivo de consulta</label>
            {{ form.main_complaint }}
          </div>

          <!-- Checkboxes -->
          <div class="col-12">
            <div class="row g-3">
              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.hearing_loss }}
                  <label class="form-check-label" for="{{ form.hearing_loss.id_for_label }}">
                    {{ form.hearing_loss.label }}
                  </label>
                </div>
              </div>

              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.tinnitus }}
                  <label class="form-check-label" for="{{ form.tinnitus.id_for_label }}">
                    {{ form.tinnitus.label }}
                  </label>
                </div>
              </div>

              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.otalgia }}
                  <label class="form-check-label" for="{{ form.otalgia.id_for_label }}">
                    {{ form.otalgia.label }}
                  </label>
                </div>
              </div>

              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.otorrhea }}
                  <label class="form-check-label" for="{{ form.otorrhea.id_for_label }}">
                    {{ form.otorrhea.label }}
                  </label>
                </div>
              </div>

              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.vertigo }}
                  <label class="form-check-label" for="{{ form.vertigo.id_for_label }}">
                    {{ form.vertigo.label }}
                  </label>
                </div>
              </div>

              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.noise_exposure }}
                  <label class="form-check-label" for="{{ form.noise_exposure.id_for_label }}">
                    {{ form.noise_exposure.label }}
                  </label>
                </div>
              </div>

              <div class="col-6 col-md-3">
                <div class="form-check">
                  {{ form.hearing_aids }}
                  <label class="form-check-label" for="{{ form.hearing_aids.id_for_label }}">
                    {{ form.hearing_aids.label }}
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <label class="form-label" for="{{ form.medication.id_for_label }}">Medicamentos / Ototóxicos</label>
            {{ form.medication }}
          </div>

          <div class="col-md-8">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label" for="{{ form.vertigo_type.id_for_label }}">Tipo de vértigo</label>
                {{ form.vertigo_type }}
              </div>
              <div class="col-md-4">
                <label class="form-label" for="{{ form.vertigo_duration.id_for_label }}">Duración</label>
                {{ form.vertigo_duration }}
              </div>
              <div class="col-md-4">
                <label class="form-label" for="{{ form.vertigo_triggers.id_for_label }}">Desencadenantes</label>
                {{ form.vertigo_triggers }}
              </div>
            </div>
          </div>

          <div class="col-12">
            <label class="form-label" for="{{ form.notes.id_for_label }}">Notas</label>
            {{ form.notes }}
          </div>

          <div class="col-12 d-flex gap-2">
            <a href="{% url 'patient_detail' patient.pk %}" class="btn btn-outline-secondary">Cancelar</a>
            <button class="btn btn-primary" type="submit">Guardar</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>
{% endblock %}